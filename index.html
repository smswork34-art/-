<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ Wenry Dice | Telegram Casino</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #ff6b00 0%, #ff9500 100%);
            --dark-bg: #0f0f0f;
            --card-bg: #1a1a1a;
            --surface: #222222;
            --accent: #ff6b00;
            --accent-light: #ff9500;
            --win-color: #00ff88;
            --lose-color: #ff4444;
            --pending-color: #ffaa00;
            --cancelled-color: #888888;
            --text-primary: #ffffff;
            --text-secondary: #aaaaaa;
            --shadow: 0 10px 25px rgba(255, 107, 0, 0.2);
            --border-radius: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 15px;
            padding-bottom: 90px;
            max-width: 500px;
            margin: 0 auto;
        }

        .section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
            padding-top: 10px;
        }

        .logo {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b00, #ff9500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 15px rgba(255, 107, 0, 0.5));
        }

        .app-title {
            font-size: 2.2rem;
            font-weight: 900;
            letter-spacing: 2px;
            margin-bottom: 5px;
            text-transform: uppercase;
            background: linear-gradient(to right, #ff6b00, #ff9500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255, 107, 0, 0.3);
        }

        .app-subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .balance-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 107, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
        }

        .balance-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .balance-amount {
            font-size: 3rem;
            font-weight: 900;
            letter-spacing: 2px;
            color: #ffffff;
            text-shadow: 0 0 15px rgba(255, 107, 0, 0.5);
        }

        .currency {
            font-size: 1.5rem;
            color: var(--accent);
            margin-left: 5px;
            opacity: 0.9;
        }

        .deposit-btn, .withdraw-btn {
            width: 100%;
            padding: 18px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.3);
        }

        .deposit-btn:hover, .withdraw-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 0, 0.4);
        }

        .deposit-btn:active, .withdraw-btn:active {
            transform: translateY(-1px);
        }

        .game-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .section-title {
            font-size: 1.2rem;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent);
        }

        .section-title i {
            color: var(--accent);
        }

        .dice-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .dice {
            width: 100px;
            height: 100px;
            background: var(--surface);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.5), 0 10px 25px rgba(0,0,0,0.5);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 107, 0, 0.3);
        }

        .dice::after {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, transparent 30%, rgba(255,107,0,0.1) 50%, transparent 70%);
            z-index: 1;
        }

        .dice.rolling {
            animation: rollDice 0.8s ease-out;
        }

        @keyframes rollDice {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(1); }
            75% { transform: rotate(270deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .bet-controls {
            background: var(--surface);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .bet-amount {
            margin-bottom: 20px;
        }

        .bet-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .amount-display {
            font-size: 2rem;
            font-weight: 900;
            text-align: center;
            margin: 20px 0;
            color: var(--accent);
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(255, 107, 0, 0.3);
        }

        .range-slider {
            width: 100%;
            margin: 25px 0;
            -webkit-appearance: none;
            height: 8px;
            background: rgba(255, 107, 0, 0.1);
            border-radius: 10px;
            outline: none;
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            box-shadow: 0 0 15px rgba(255, 107, 0, 0.5);
            border: 2px solid #000;
            transition: var(--transition);
        }

        .range-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 107, 0, 0.7);
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .amount-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .amount-btn {
            flex: 1;
            padding: 12px;
            background: rgba(255, 107, 0, 0.1);
            border: 2px solid rgba(255, 107, 0, 0.3);
            border-radius: 10px;
            color: var(--accent);
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .amount-btn:hover {
            background: rgba(255, 107, 0, 0.2);
            border-color: rgba(255, 107, 0, 0.5);
            transform: translateY(-2px);
        }

        .prediction-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            background: rgba(255, 107, 0, 0.05);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .prediction-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px;
            background: var(--surface);
            border-radius: 12px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
            width: 48%;
        }

        .prediction-btn.active {
            border-color: var(--accent);
            background: rgba(255, 107, 0, 0.1);
            box-shadow: 0 0 20px rgba(255, 107, 0, 0.2);
        }

        .prediction-btn i {
            font-size: 1.8rem;
        }

        .prediction-btn.low i {
            color: var(--lose-color);
        }

        .prediction-btn.high i {
            color: var(--win-color);
        }

        .prediction-btn span {
            font-weight: 700;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .prediction-btn small {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .game-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .btn {
            flex: 1;
            padding: 20px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-play {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.3);
        }

        .btn-play:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 0, 0.4);
        }

        .btn-play:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-auto {
            background: var(--surface);
            color: var(--text-primary);
            border: 2px solid rgba(255, 107, 0, 0.3);
        }

        .btn-auto:hover {
            border-color: rgba(255, 107, 0, 0.5);
            transform: translateY(-3px);
            background: rgba(255, 107, 0, 0.1);
        }

        .result-message {
            text-align: center;
            padding: 20px;
            margin-top: 25px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.2rem;
            display: none;
            border: 2px solid;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: fadeIn 0.5s ease;
        }

        .win-message {
            background: rgba(0, 255, 136, 0.1);
            color: var(--win-color);
            border-color: var(--win-color);
        }

        .lose-message {
            background: rgba(255, 68, 68, 0.1);
            color: var(--lose-color);
            border-color: var(--lose-color);
        }

        .history-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .history-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .history-item {
            background: var(--surface);
            border-radius: 12px;
            padding: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .history-item:hover {
            transform: translateX(5px);
            border-color: rgba(255, 107, 0, 0.3);
            background: rgba(255, 107, 0, 0.05);
        }

        .history-item.win {
            border-left: 4px solid var(--win-color);
        }

        .history-item.lose {
            border-left: 4px solid var(--lose-color);
        }

        .history-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .history-dice {
            font-size: 2rem;
        }

        .history-details h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .history-details p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .history-amount {
            font-size: 1.3rem;
            font-weight: 900;
            letter-spacing: 1px;
        }

        .history-amount.positive {
            color: var(--win-color);
        }

        .history-amount.negative {
            color: var(--lose-color);
        }

        .bonus-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .profile-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: var(--primary-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            border: 3px solid rgba(255, 107, 0, 0.3);
            box-shadow: 0 0 20px rgba(255, 107, 0, 0.3);
        }

        .profile-info h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            font-weight: 900;
            background: linear-gradient(to right, #ff6b00, #ff9500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .profile-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .user-id {
            color: var(--accent) !important;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .user-username {
            color: var(--accent-light) !important;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--surface);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 107, 0, 0.1);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 107, 0, 0.3);
            box-shadow: 0 10px 20px rgba(255, 107, 0, 0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 5px;
            color: var(--accent);
            text-shadow: 0 0 10px rgba(255, 107, 0, 0.3);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .profile-actions {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .profile-btn {
            padding: 18px;
            background: var(--surface);
            border: 1px solid rgba(255, 107, 0, 0.1);
            border-radius: 12px;
            color: var(--text-primary);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1rem;
        }

        .profile-btn:hover {
            background: rgba(255, 107, 0, 0.1);
            transform: translateX(10px);
            border-color: rgba(255, 107, 0, 0.3);
        }

        .profile-btn i {
            width: 24px;
            text-align: center;
            color: var(--accent);
            font-size: 1.2rem;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 15, 15, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            transform: translateY(20px);
            transition: transform 0.3s ease;
            border: 2px solid rgba(255, 107, 0, 0.2);
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 107, 0, 0.1);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent);
        }

        .close-modal {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.8rem;
            cursor: pointer;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            color: var(--accent);
            transform: rotate(90deg);
            background: rgba(255, 107, 0, 0.1);
        }

        .amount-input {
            margin-bottom: 25px;
        }

        .amount-input label {
            display: block;
            margin-bottom: 15px;
            color: var(--text-secondary);
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 1rem;
        }

        .amount-field {
            position: relative;
        }

        .amount-field input {
            width: 100%;
            padding: 20px;
            background: var(--surface);
            border: 2px solid rgba(255, 107, 0, 0.2);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1.5rem;
            font-weight: 900;
            text-align: center;
            transition: var(--transition);
            letter-spacing: 1px;
        }

        .amount-field input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(255, 107, 0, 0.2);
        }

        .amount-field::after {
            content: '‚ÇΩ';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent);
            font-size: 1.5rem;
            font-weight: 900;
        }

        .amount-suggestions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .amount-suggestion {
            padding: 15px;
            background: var(--surface);
            border: 2px solid rgba(255, 107, 0, 0.2);
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 700;
            font-size: 1rem;
            text-align: center;
        }

        .amount-suggestion:hover {
            background: rgba(255, 107, 0, 0.1);
            border-color: rgba(255, 107, 0, 0.5);
            transform: translateY(-3px);
        }

        .payment-details {
            background: var(--surface);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
            display: none;
            border: 2px solid rgba(255, 107, 0, 0.2);
        }

        .payment-details.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .details-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--accent);
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
        }

        .details-content {
            background: rgba(255, 107, 0, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .details-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 107, 0, 0.1);
        }

        .details-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .details-item .label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .details-item .value {
            font-weight: 900;
            color: var(--accent);
            font-size: 1.2rem;
            letter-spacing: 1px;
            word-break: break-all;
        }

        .modal-btn {
            width: 100%;
            padding: 20px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.3);
        }

        .modal-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 0, 0.4);
        }

        .modal-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .modal-btn.secondary {
            background: var(--surface);
            color: var(--text-primary);
            margin-top: 15px;
            border: 2px solid rgba(255, 107, 0, 0.3);
        }

        .modal-btn.secondary:hover:not(:disabled) {
            background: rgba(255, 107, 0, 0.1);
            border-color: rgba(255, 107, 0, 0.5);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            border-left: 4px solid var(--accent);
            max-width: 350px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1001;
            border: 2px solid rgba(255, 107, 0, 0.2);
        }

        .notification.active {
            transform: translateX(0);
        }

        .notification.success {
            border-left-color: var(--win-color);
        }

        .notification.error {
            border-left-color: var(--lose-color);
        }

        .notification-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .notification-title {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .notification-message {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-top: 2px solid rgba(255, 107, 0, 0.2);
            padding: 15px;
            display: flex;
            justify-content: space-around;
            max-width: 500px;
            margin: 0 auto;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            background: none;
            border: none;
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
            padding: 10px;
            border-radius: 12px;
            width: 70px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-btn.active {
            color: var(--accent);
            background: rgba(255, 107, 0, 0.1);
            transform: translateY(-5px);
        }

        .nav-btn i {
            font-size: 1.4rem;
        }

        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,107,0,.3);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .payment-method-compact {
            background: var(--surface);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            text-align: left;
            margin-bottom: 10px;
        }

        .payment-method-compact.active {
            border-color: var(--accent);
            background: rgba(255, 107, 0, 0.1);
            box-shadow: 0 0 20px rgba(255, 107, 0, 0.2);
        }

        .payment-method-compact:hover {
            transform: translateY(-3px);
            background: rgba(255, 107, 0, 0.1);
            border-color: rgba(255, 107, 0, 0.3);
        }

        .withdraw-input {
            margin-bottom: 25px;
        }

        .withdraw-input label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .withdraw-field {
            width: 100%;
            padding: 18px;
            background: var(--surface);
            border: 2px solid rgba(255, 107, 0, 0.2);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
        }

        .withdraw-field:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(255, 107, 0, 0.2);
        }

        .bank-selection {
            margin-bottom: 25px;
        }

        .bank-selection label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .bank-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .bank-option {
            background: var(--surface);
            border: 2px solid rgba(255, 107, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .bank-option:hover {
            background: rgba(255, 107, 0, 0.1);
            border-color: rgba(255, 107, 0, 0.5);
            transform: translateY(-3px);
        }

        .bank-option.active {
            border-color: var(--accent);
            background: rgba(255, 107, 0, 0.1);
            box-shadow: 0 0 20px rgba(255, 107, 0, 0.2);
        }

        /* –ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤ */
        .withdraw-history-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 107, 0, 0.1);
        }

        .withdraw-history-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .withdraw-history-item {
            background: var(--surface);
            border-radius: 12px;
            padding: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
            border: 1px solid transparent;
            border-left: 4px solid;
        }

        .withdraw-history-item:hover {
            transform: translateX(5px);
            background: rgba(255, 107, 0, 0.05);
        }

        .withdraw-history-item.pending {
            border-left-color: var(--pending-color);
        }

        .withdraw-history-item.completed {
            border-left-color: var(--win-color);
        }

        .withdraw-history-item.cancelled {
            border-left-color: var(--cancelled-color);
        }

        .withdraw-history-info {
            flex: 1;
        }

        .withdraw-history-info h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .withdraw-history-details {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .withdraw-history-details p {
            color: var(--text-secondary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .withdraw-history-amount {
            font-size: 1.3rem;
            font-weight: 900;
            letter-spacing: 1px;
        }

        .withdraw-history-amount.pending {
            color: var(--pending-color);
        }

        .withdraw-history-amount.completed {
            color: var(--win-color);
        }

        .withdraw-history-amount.cancelled {
            color: var(--cancelled-color);
        }

        .withdraw-history-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        .status-pending {
            background: rgba(255, 170, 0, 0.1);
            color: var(--pending-color);
            border: 1px solid var(--pending-color);
        }

        .status-completed {
            background: rgba(0, 255, 136, 0.1);
            color: var(--win-color);
            border: 1px solid var(--win-color);
        }

        .status-cancelled {
            background: rgba(136, 136, 136, 0.1);
            color: var(--cancelled-color);
            border: 1px solid var(--cancelled-color);
        }

        @media (max-width: 480px) {
            .dice {
                width: 80px;
                height: 80px;
                font-size: 2.8rem;
            }
            
            .bank-options {
                grid-template-columns: 1fr;
            }
            
            .amount-suggestions {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .notification {
                left: 20px;
                right: 20px;
                max-width: none;
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 107, 0, 0.1);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-light);
        }
    </style>
</head>
<body>
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notification" id="notification">
        <div class="notification-header">
            <i class="fas fa-check-circle" id="notificationIcon"></i>
            <div class="notification-title" id="notificationTitle">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</div>
        </div>
        <div class="notification-message" id="notificationMessage"></div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è -->
    <div class="modal-overlay" id="depositModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-wallet"></i> –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>
                <button class="close-modal">&times;</button>
            </div>
            
            <div class="amount-input">
                <label>–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                <div class="amount-field">
                    <input type="number" min="100" max="50000" step="100" value="1000" id="depositAmount">
                </div>
                <div class="amount-suggestions">
                    <button class="amount-suggestion" data-amount="500">500 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="1000">1 000 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="3000">3 000 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="5000">5 000 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="10000">10 000 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="25000">25 000 ‚ÇΩ</button>
                </div>
            </div>
            
            <div style="margin: 25px 0;">
                <label style="display: block; margin-bottom: 15px; color: var(--accent); text-align: center; text-transform: uppercase; letter-spacing: 1px; font-size: 1rem;">
                    –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
                </label>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="payment-method-compact active" data-method="sbp">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 45px; height: 45px; background: var(--primary-gradient); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; border: 2px solid rgba(255,107,0,0.3);">
                                üá∑üá∫
                            </div>
                            <div style="text-align: left;">
                                <div style="font-weight: 700; margin-bottom: 3px; font-size: 1rem;">–°–ë–ü</div>
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">–ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–≤–æ–¥</div>
                            </div>
                        </div>
                        <i class="fas fa-check-circle" style="color: var(--accent); font-size: 1.2rem;"></i>
                    </button>
                    
                    <button class="payment-method-compact" data-method="crypto">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 45px; height: 45px; background: var(--primary-gradient); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; border: 2px solid rgba(255,107,0,0.3);">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div style="text-align: left;">
                                <div style="font-weight: 700; margin-bottom: 3px; font-size: 1rem;">USDT (TRC-20)</div>
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞, 0% –∫–æ–º–∏—Å—Å–∏—è</div>
                            </div>
                        </div>
                        <i class="fas fa-arrow-right" style="color: var(--text-secondary);"></i>
                    </button>
                </div>
            </div>
            
            <div class="payment-details" id="depositDetails">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div class="details-title">–î–ª—è –æ–ø–ª–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:</div>
                    <div style="font-size: 1.6rem; font-weight: 900; color: var(--accent); margin-bottom: 20px; letter-spacing: 1px; text-shadow: 0 0 15px rgba(255,107,0,0.3);" id="finalAmount">1 150 ‚ÇΩ</div>
                    
                    <div class="details-content">
                        <div id="sbpDetails" style="display: block;">
                            <div class="details-item">
                                <div class="label">–ù–æ–º–µ—Ä –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞:</div>
                                <div class="value">+7 (999) 123-45-67</div>
                            </div>
                            <div class="details-item">
                                <div class="label">–ë–∞–Ω–∫:</div>
                                <div class="value">–¢–∏–Ω—å–∫–æ—Ñ—Ñ</div>
                            </div>
                            <div class="details-item">
                                <div class="label">–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</div>
                                <div class="value">–ò–ü Wenry Dice</div>
                            </div>
                        </div>
                        <div id="cryptoDetails" style="display: none;">
                            <div class="details-item">
                                <div class="label">–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞:</div>
                                <div class="value">TUxj2bNET1SY1FsZo38WhKmHP7qeDm2GqP</div>
                            </div>
                            <div class="details-item">
                                <div class="label">–°–µ—Ç—å:</div>
                                <div class="value">TRC-20 (TRON)</div>
                            </div>
                            <div class="details-item">
                                <div class="label">–¢–æ–∫–µ–Ω:</div>
                                <div class="value">USDT</div>
                            </div>
                        </div>
                        <div class="details-item">
                            <div class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–ª–∞—Ç–µ–∂—É:</div>
                            <div class="value" id="paymentComment">WENRY12345</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,68,68,0.1); border-radius: 12px; padding: 15px; margin: 20px 0; border: 2px solid rgba(255,68,68,0.3);">
                        <div style="font-size: 0.9rem; color: #ff4444; margin-bottom: 10px; font-weight: 700; text-transform: uppercase;">
                            ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!
                        </div>
                        <div style="font-size: 0.8rem; color: #ff8888; line-height: 1.4;">
                            ‚Ä¢ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π<br>
                            ‚Ä¢ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π = –æ—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞<br>
                            ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="modal-btn" id="depositNextBtn">
                <i class="fas fa-credit-card"></i> –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ
            </button>
            <button class="modal-btn secondary" id="depositConfirmBtn" style="display: none;">
                <i class="fas fa-check"></i> –Ø –æ–ø–ª–∞—Ç–∏–ª
            </button>
            <button class="modal-btn secondary" id="depositWaitingBtn" style="display: none;" disabled>
                <div class="loader"></div> –û–∂–∏–¥–∞–Ω–∏–µ
            </button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–≤–æ–¥–∞ -->
    <div class="modal-overlay" id="withdrawModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-credit-card"></i> –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h2>
                <button class="close-modal">&times;</button>
            </div>
            
            <div class="amount-input">
                <label>–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞</label>
                <div class="amount-field">
                    <input type="number" min="100" max="50000" step="100" value="1000" id="withdrawAmount">
                </div>
                <div class="amount-suggestions">
                    <button class="amount-suggestion" data-amount="500">500 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="1000">1 000 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="3000">3 000 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="5000">5 000 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="10000">10 000 ‚ÇΩ</button>
                    <button class="amount-suggestion" data-amount="25000">25 000 ‚ÇΩ</button>
                </div>
            </div>
            
            <div style="margin: 25px 0;">
                <label style="display: block; margin-bottom: 15px; color: var(--accent); text-align: center; text-transform: uppercase; letter-spacing: 1px; font-size: 1rem;">
                    –°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è
                </label>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="payment-method-compact active" data-method="sbp">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 45px; height: 45px; background: var(--primary-gradient); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; border: 2px solid rgba(255,107,0,0.3);">
                                üá∑üá∫
                            </div>
                            <div style="text-align: left;">
                                <div style="font-weight: 700; margin-bottom: 3px; font-size: 1rem;">–°–ë–ü / –ö–∞—Ä—Ç–∞</div>
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">–ù–∞ –±–∞–Ω–∫–æ–≤—Å–∫—É—é –∫–∞—Ä—Ç—É</div>
                            </div>
                        </div>
                        <i class="fas fa-check-circle" style="color: var(--accent); font-size: 1.2rem;"></i>
                    </button>
                    
                    <button class="payment-method-compact" data-method="crypto">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 45px; height: 45px; background: var(--primary-gradient); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; border: 2px solid rgba(255,107,0,0.3);">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div style="text-align: left;">
                                <div style="font-weight: 700; margin-bottom: 3px; font-size: 1rem;">USDT (TRC-20)</div>
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">–ù–∞ –∫—Ä–∏–ø—Ç–æ-–∫–æ—à–µ–ª–µ–∫</div>
                            </div>
                        </div>
                        <i class="fas fa-arrow-right" style="color: var(--text-secondary);"></i>
                    </button>
                </div>
            </div>
            
            <div class="withdraw-input" id="sbpWithdrawInput" style="display: none;">
                <label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –∫–∞—Ä—Ç—ã</label>
                <input type="text" class="withdraw-field" id="sbpAccount" placeholder="+7 999 123 45 67">
            </div>
            
            <div class="bank-selection" id="bankSelection" style="display: none;">
                <label>–í—ã–±–µ—Ä–∏—Ç–µ –±–∞–Ω–∫</label>
                <div class="bank-options">
                    <div class="bank-option" data-bank="tinkoff">–¢-–ë–∞–Ω–∫</div>
                    <div class="bank-option" data-bank="sber">–°–±–µ—Ä</div>
                    <div class="bank-option" data-bank="alfa">–ê–ª—å—Ñ–∞</div>
                    <div class="bank-option" data-bank="vtb">–í–¢–ë</div>
                </div>
            </div>
            
            <div class="withdraw-input" id="cryptoWithdrawInput" style="display: none;">
                <label>–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ USDT TRC-20</label>
                <input type="text" class="withdraw-field" id="cryptoWallet" placeholder="TUxj2bNET1SY1FsZo38WhKmHP7qeDm2GqP">
            </div>
            
            <div class="payment-details" id="withdrawDetails" style="display: none;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div class="details-title">–î–µ—Ç–∞–ª–∏ –≤—ã–≤–æ–¥–∞:</div>
                    <div style="font-size: 1.6rem; font-weight: 900; color: var(--accent); margin-bottom: 20px; letter-spacing: 1px; text-shadow: 0 0 15px rgba(255,107,0,0.3);" id="withdrawTotal">1 000 ‚ÇΩ</div>
                    
                    <div class="details-content">
                        <div id="withdrawInfo"></div>
                        <div class="details-item">
                            <div class="label">–ö–æ–º–∏—Å—Å–∏—è (5%):</div>
                            <div class="value" id="withdrawFee">50 ‚ÇΩ</div>
                        </div>
                        <div class="details-item">
                            <div class="label">–ö –ø–æ–ª—É—á–µ–Ω–∏—é:</div>
                            <div class="value" id="withdrawNet">950 ‚ÇΩ</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="modal-btn" id="withdrawNextBtn">
                <i class="fas fa-arrow-right"></i> –î–∞–ª–µ–µ
            </button>
            <button class="modal-btn secondary" id="withdrawConfirmBtn" style="display: none;">
                <i class="fas fa-check"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–≤–æ–¥
            </button>
            <button class="modal-btn secondary" id="withdrawWaitingBtn" style="display: none;" disabled>
                <div class="loader"></div> –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–∫–∏
            </button>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="header">
        <div class="logo">üé≤</div>
        <h1 class="app-title">Wenry Dice</h1>
        <p class="app-subtitle" id="userGreeting">Premium Dice Casino</p>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –ò–≥—Ä–∞—Ç—å -->
    <div class="section active" id="playSection">
        <div class="balance-card">
            <div class="balance-label">
                <i class="fas fa-wallet"></i> –í–∞—à –±–∞–ª–∞–Ω—Å
            </div>
            <div class="balance-amount" id="balanceAmount">0<span class="currency">‚ÇΩ</span></div>
            <button class="deposit-btn" id="depositBtn">
                <i class="fas fa-plus-circle"></i> –ü–æ–ø–æ–ª–Ω–∏—Ç—å
            </button>
            <button class="withdraw-btn" id="withdrawBtnMain">
                <i class="fas fa-credit-card"></i> –í—ã–≤–æ–¥
            </button>
        </div>

        <div class="game-container">
            <h2 class="section-title"><i class="fas fa-dice"></i> –ö–æ—Å—Ç–∏ Wenry</h2>
            
            <div class="dice-container">
                <div class="dice" id="dice1">‚öÑ</div>
                <div class="dice" id="dice2">‚öÉ</div>
            </div>

            <div class="bet-controls">
                <div class="bet-amount">
                    <div class="bet-label">
                        <span>–°—Ç–∞–≤–∫–∞</span>
                        <span id="multiplier">–í—ã–∏–≥—Ä—ã—à: x1.8</span>
                    </div>
                    <div class="amount-display" id="betAmount">100 ‚ÇΩ</div>
                    <input type="range" min="10" max="1000" step="10" value="100" class="range-slider" id="betSlider">
                    <div class="range-labels">
                        <span>10 ‚ÇΩ</span>
                        <span>1000 ‚ÇΩ</span>
                    </div>
                    
                    <div class="amount-controls">
                        <button class="amount-btn" data-action="half">¬Ω</button>
                        <button class="amount-btn" data-action="double">2x</button>
                        <button class="amount-btn" data-action="min">MIN</button>
                        <button class="amount-btn" data-action="max">MAX</button>
                    </div>
                </div>

                <div class="prediction-controls">
                    <button class="prediction-btn low active" id="betLow">
                        <i class="fas fa-arrow-down"></i>
                        <span>–ú–µ–Ω—å—à–µ 7</span>
                        <small>x1.8</small>
                    </button>
                    <button class="prediction-btn high" id="betHigh">
                        <i class="fas fa-arrow-up"></i>
                        <span>–ë–æ–ª—å—à–µ 7</span>
                        <small>x1.8</small>
                    </button>
                </div>
            </div>

            <div class="game-buttons">
                <button class="btn btn-play" id="playButton">
                    <i class="fas fa-play"></i> –ò–≥—Ä–∞—Ç—å
                </button>
                <button class="btn btn-auto" id="autoButton">
                    <i class="fas fa-redo"></i> –ê–≤—Ç–æ
                </button>
            </div>

            <div class="result-message" id="resultMessage"></div>
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –ò—Å—Ç–æ—Ä–∏—è -->
    <div class="section" id="historySection">
        <div class="balance-card">
            <div class="balance-label">
                <i class="fas fa-wallet"></i> –í–∞—à –±–∞–ª–∞–Ω—Å
            </div>
            <div class="balance-amount" id="balanceAmount2">0<span class="currency">‚ÇΩ</span></div>
            <button class="deposit-btn" id="depositBtn2">
                <i class="fas fa-plus-circle"></i> –ü–æ–ø–æ–ª–Ω–∏—Ç—å
            </button>
            <button class="withdraw-btn" id="withdrawBtn2">
                <i class="fas fa-credit-card"></i> –í—ã–≤–æ–¥
            </button>
        </div>

        <div class="history-container">
            <div class="history-title">
                <h2 class="section-title"><i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä</h2>
                <button id="clearHistory" style="background:none;border:none;color:var(--text-secondary);cursor:pointer;">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            <div class="history-list" id="historyList">
                <!-- –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –ë–æ–Ω—É—Å—ã -->
    <div class="section" id="bonusSection">
        <div class="balance-card">
            <div class="balance-label">
                <i class="fas fa-wallet"></i> –í–∞—à –±–∞–ª–∞–Ω—Å
            </div>
            <div class="balance-amount" id="balanceAmount3">0<span class="currency">‚ÇΩ</span></div>
            <button class="deposit-btn" id="depositBtn3">
                <i class="fas fa-plus-circle"></i> –ü–æ–ø–æ–ª–Ω–∏—Ç—å
            </button>
            <button class="withdraw-btn" id="withdrawBtn3">
                <i class="fas fa-credit-card"></i> –í—ã–≤–æ–¥
            </button>
        </div>

        <div class="bonus-container">
            <h2 class="section-title"><i class="fas fa-gift"></i> –ë–æ–Ω—É—Å—ã</h2>
            <div style="text-align: center; padding: 50px 20px; color: var(--text-secondary);">
                <i class="fas fa-gift" style="font-size: 3.5rem; margin-bottom: 25px; opacity: 0.5;"></i>
                <p style="font-size: 1rem; margin-bottom: 10px; color: var(--accent); font-weight: 600;">–ë–æ–Ω—É—Å—ã —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è</p>
                <p style="font-size: 0.9rem;">–ê–∫—Ç–∏–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á–µ—Ç–∞</p>
            </div>
        </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –ü—Ä–æ—Ñ–∏–ª—å -->
    <div class="section" id="profileSection">
        <div class="balance-card">
            <div class="balance-label">
                <i class="fas fa-wallet"></i> –í–∞—à –±–∞–ª–∞–Ω—Å
            </div>
            <div class="balance-amount" id="balanceAmount4">0<span class="currency">‚ÇΩ</span></div>
            <button class="deposit-btn" id="depositBtn4">
                <i class="fas fa-plus-circle"></i> –ü–æ–ø–æ–ª–Ω–∏—Ç—å
            </button>
            <button class="withdraw-btn" id="withdrawBtn4">
                <i class="fas fa-credit-card"></i> –í—ã–≤–æ–¥
            </button>
        </div>

        <div class="profile-container">
            <div class="profile-header">
                <div class="profile-avatar" id="userAvatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-info">
                    <h2 id="userName">–ò–≥—Ä–æ–∫</h2>
                    <p class="user-id" id="userId">ID: ...</p>
                    <p class="user-username" id="userUsername">@username</p>
                    <p id="userLevel" style="color: var(--accent); font-weight: 700;">üé≤ –ù–æ–≤–∏—á–æ–∫</p>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalWins">0</div>
                    <div class="stat-label">–ü–æ–±–µ–¥</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalGames">0</div>
                    <div class="stat-label">–ò–≥—Ä</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalDeposits">0</div>
                    <div class="stat-label">–ü–æ–ø–æ–ª–Ω–µ–Ω–æ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalWithdrawals">0</div>
                    <div class="stat-label">–í—ã–≤–µ–¥–µ–Ω–æ</div>
                </div>
            </div>

            <div class="withdraw-history-container">
                <h2 class="section-title"><i class="fas fa-exchange-alt"></i> –ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤</h2>
                <div class="withdraw-history-list" id="withdrawHistoryList">
                    <!-- –ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    <div style="text-align: center; padding: 30px 20px; color: var(--text-secondary);">
                        <i class="fas fa-exchange-alt" style="font-size: 2.5rem; margin-bottom: 15px; opacity: 0.5;"></i>
                        <p style="font-size: 0.9rem;">–ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤ –ø—É—Å—Ç–∞</p>
                    </div>
                </div>
            </div>

            <div class="profile-actions">
                <button class="profile-btn" id="statsBtn">
                    <i class="fas fa-chart-line"></i>
                    <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                </button>
                <button class="profile-btn" id="supportBtn">
                    <i class="fas fa-headset"></i>
                    <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                </button>
                <button class="profile-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>–í—ã–π—Ç–∏</span>
                </button>
            </div>
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="bottom-nav">
        <button class="nav-btn active" data-section="play">
            <i class="fas fa-dice"></i>
            <span>–ò–≥—Ä–∞—Ç—å</span>
        </button>
        <button class="nav-btn" data-section="history">
            <i class="fas fa-history"></i>
            <span>–ò—Å—Ç–æ—Ä–∏—è</span>
        </button>
        <button class="nav-btn" data-section="bonus">
            <i class="fas fa-gift"></i>
            <span>–ë–æ–Ω—É—Å—ã</span>
        </button>
        <button class="nav-btn" data-section="profile">
            <i class="fas fa-user"></i>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </button>
    </div>

    <script>
        // ========== –ö–û–ù–°–¢–ê–ù–¢–´ ==========
        const BOT_TOKEN = '8212269748:AAESKhHaV5L5DHjLDYCD6EIZiVhcp1HqMtA';
        const ADMIN_ID = '8155919358';
        const CRYPTO_WALLET = 'TUxj2bNET1SY1FsZo38WhKmHP7qeDm2GqP';
        
        let balance = 0;
        let betAmount = 100;
        let isBetLow = true;
        let isAutoPlay = false;
        let gameHistory = [];
        let depositHistory = [];
        let withdrawHistory = [];
        let currentUser = null;
        let currentPaymentId = null;
        let currentWithdrawId = null;
        
        const diceFaces = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];
        const MULTIPLIER = 1.8;
        const WIN_CHANCE = 0.4;
        const WITHDRAW_FEE = 0.05;
        
        // ========== –≠–õ–ï–ú–ï–ù–¢–´ DOM ==========
        const tg = window.Telegram.WebApp;
        const notification = document.getElementById('notification');
        const notificationTitle = document.getElementById('notificationTitle');
        const notificationMessage = document.getElementById('notificationMessage');
        const notificationIcon = document.getElementById('notificationIcon');
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        const navButtons = document.querySelectorAll('.nav-btn');
        const sections = {
            play: document.getElementById('playSection'),
            history: document.getElementById('historySection'),
            bonus: document.getElementById('bonusSection'),
            profile: document.getElementById('profileSection')
        };
        
        // –ò–≥—Ä–∞
        const balanceElements = [
            document.getElementById('balanceAmount'),
            document.getElementById('balanceAmount2'),
            document.getElementById('balanceAmount3'),
            document.getElementById('balanceAmount4')
        ];
        const betAmountElement = document.getElementById('betAmount');
        const betSlider = document.getElementById('betSlider');
        const dice1Element = document.getElementById('dice1');
        const dice2Element = document.getElementById('dice2');
        const playButton = document.getElementById('playButton');
        const autoButton = document.getElementById('autoButton');
        const betLowButton = document.getElementById('betLow');
        const betHighButton = document.getElementById('betHigh');
        const resultMessage = document.getElementById('resultMessage');
        const historyList = document.getElementById('historyList');
        const multiplierElement = document.getElementById('multiplier');
        const clearHistoryButton = document.getElementById('clearHistory');
        
        // –ü—Ä–æ—Ñ–∏–ª—å
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const userId = document.getElementById('userId');
        const userUsername = document.getElementById('userUsername');
        const userGreeting = document.getElementById('userGreeting');
        const userLevel = document.getElementById('userLevel');
        const totalWins = document.getElementById('totalWins');
        const totalGames = document.getElementById('totalGames');
        const totalDeposits = document.getElementById('totalDeposits');
        const totalWithdrawals = document.getElementById('totalWithdrawals');
        const withdrawHistoryList = document.getElementById('withdrawHistoryList');
        
        // –î–µ–ø–æ–∑–∏—Ç
        const depositModal = document.getElementById('depositModal');
        const depositBtns = document.querySelectorAll('#depositBtn, #depositBtn2, #depositBtn3, #depositBtn4');
        const depositCloseBtn = depositModal.querySelector('.close-modal');
        const depositAmountInput = document.getElementById('depositAmount');
        const finalAmountElement = document.getElementById('finalAmount');
        const paymentCommentElement = document.getElementById('paymentComment');
        const depositNextBtn = document.getElementById('depositNextBtn');
        const depositConfirmBtn = document.getElementById('depositConfirmBtn');
        const depositWaitingBtn = document.getElementById('depositWaitingBtn');
        const sbpDetails = document.getElementById('sbpDetails');
        const cryptoDetails = document.getElementById('cryptoDetails');
        const depositDetails = document.getElementById('depositDetails');
        
        // –í—ã–≤–æ–¥
        const withdrawModal = document.getElementById('withdrawModal');
        const withdrawBtns = document.querySelectorAll('#withdrawBtnMain, #withdrawBtn2, #withdrawBtn3, #withdrawBtn4');
        const withdrawCloseBtn = withdrawModal.querySelector('.close-modal');
        const withdrawAmountInput = document.getElementById('withdrawAmount');
        const withdrawTotalElement = document.getElementById('withdrawTotal');
        const withdrawFeeElement = document.getElementById('withdrawFee');
        const withdrawNetElement = document.getElementById('withdrawNet');
        const withdrawInfoElement = document.getElementById('withdrawInfo');
        const withdrawNextBtn = document.getElementById('withdrawNextBtn');
        const withdrawConfirmBtn = document.getElementById('withdrawConfirmBtn');
        const withdrawWaitingBtn = document.getElementById('withdrawWaitingBtn');
        const sbpWithdrawInput = document.getElementById('sbpWithdrawInput');
        const cryptoWithdrawInput = document.getElementById('cryptoWithdrawInput');
        const bankSelection = document.getElementById('bankSelection');
        const sbpAccountInput = document.getElementById('sbpAccount');
        const cryptoWalletInput = document.getElementById('cryptoWallet');
        const withdrawDetails = document.getElementById('withdrawDetails');
        
        // –û–±—â–∏–µ
        const amountSuggestions = document.querySelectorAll('.amount-suggestion');
        const paymentMethods = document.querySelectorAll('.payment-method-compact');
        const bankOptions = document.querySelectorAll('.bank-option');
        
        // ========== –£–¢–ò–õ–ò–¢–´ ==========
        function showNotification(title, message, type = 'info') {
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            notification.className = 'notification';
            notificationIcon.className = 'fas ' + 
                (type === 'success' ? 'fa-check-circle' : 
                 type === 'error' ? 'fa-exclamation-circle' : 
                 'fa-info-circle');
            
            if (type === 'success') notification.classList.add('success');
            if (type === 'error') notification.classList.add('error');
            
            notification.classList.add('active');
            
            setTimeout(() => {
                notification.classList.remove('active');
            }, 5000);
        }
        
        function generatePaymentId() {
            return 'WENRY' + Date.now().toString().slice(-8) + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
        }
        
        function generateWithdrawId() {
            return 'WDR' + Date.now().toString().slice(-8) + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
        }
        
        function calculateFinalAmount(amount) {
            return Math.round(amount * 1.15);
        }
        
        async function sendTelegramMessage(chatId, text, replyMarkup = null) {
            try {
                const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
                const data = {
                    chat_id: chatId,
                    text: text,
                    parse_mode: 'HTML'
                };
                
                if (replyMarkup) {
                    data.reply_markup = replyMarkup;
                }
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                return await response.json();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error);
                return null;
            }
        }
        
        // ========== –û–ë–ù–û–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–• ==========
        function updateBalance() {
            const formattedBalance = balance.toLocaleString('ru-RU');
            balanceElements.forEach(el => {
                if (el) el.innerHTML = formattedBalance + '<span class="currency">‚ÇΩ</span>';
            });
            localStorage.setItem('wenry_balance', balance.toString());
            updateWithdrawHistory();
            updateStats();
        }
        
        function updateBetAmount() {
            betAmountElement.textContent = betAmount + ' ‚ÇΩ';
            betSlider.value = betAmount;
        }
        
        // ========== –ò–ì–†–ê ==========
        function rollDice() {
            const dice1 = Math.floor(Math.random() * 6) + 1;
            const dice2 = Math.floor(Math.random() * 6) + 1;
            const total = dice1 + dice2;
            
            dice1Element.classList.add('rolling');
            dice2Element.classList.add('rolling');
            
            let rolls = 0;
            const rollInterval = setInterval(() => {
                dice1Element.textContent = diceFaces[Math.floor(Math.random() * 6)];
                dice2Element.textContent = diceFaces[Math.floor(Math.random() * 6)];
                rolls++;
                
                if (rolls > 10) {
                    clearInterval(rollInterval);
                    dice1Element.classList.remove('rolling');
                    dice2Element.classList.remove('rolling');
                    
                    dice1Element.textContent = diceFaces[dice1 - 1];
                    dice2Element.textContent = diceFaces[dice2 - 1];
                    
                    checkResult(dice1, dice2, total);
                }
            }, 80);
            
            return { dice1, dice2, total };
        }
        
        function checkResult(dice1, dice2, total) {
            const isWin = Math.random() < WIN_CHANCE;
            
            let actualWin = false;
            if (isWin) {
                if (isBetLow && total < 7) {
                    actualWin = true;
                } else if (!isBetLow && total > 7) {
                    actualWin = true;
                }
            }
            
            const winAmount = actualWin ? Math.round(betAmount * MULTIPLIER) : 0;
            
            if (actualWin) {
                balance += winAmount;
                resultMessage.textContent = `–ü–û–ë–ï–î–ê! +${winAmount}‚ÇΩ (${dice1}+${dice2}=${total})`;
                resultMessage.className = 'result-message win-message';
            } else {
                balance -= betAmount;
                resultMessage.textContent = `–ü–†–û–ò–ì–†–´–®! -${betAmount}‚ÇΩ (${dice1}+${dice2}=${total})`;
                resultMessage.className = 'result-message lose-message';
            }
            
            resultMessage.style.display = 'block';
            updateBalance();
            
            addToHistory(actualWin, dice1, dice2, total, actualWin ? winAmount : -betAmount);
            
            if (isAutoPlay && balance >= betAmount) {
                setTimeout(playGame, 1500);
            } else if (balance < betAmount) {
                isAutoPlay = false;
                autoButton.innerHTML = '<i class="fas fa-redo"></i> –ê–≤—Ç–æ';
                autoButton.classList.remove('pulse');
            }
        }
        
        function addToHistory(win, dice1, dice2, total, amount) {
            const historyItem = document.createElement('div');
            historyItem.className = `history-item ${win ? 'win' : 'lose'}`;
            
            const time = new Date().toLocaleTimeString('ru-RU', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            historyItem.innerHTML = `
                <div class="history-info">
                    <div class="history-dice">${diceFaces[dice1-1]}${diceFaces[dice2-1]}</div>
                    <div class="history-details">
                        <h4>${dice1} + ${dice2} = ${total}</h4>
                        <p>${time} ‚Ä¢ ${isBetLow ? '–ú–µ–Ω—å—à–µ 7' : '–ë–æ–ª—å—à–µ 7'}</p>
                    </div>
                </div>
                <div class="history-amount ${amount > 0 ? 'positive' : 'negative'}">
                    ${amount > 0 ? '+' : ''}${amount}‚ÇΩ
                </div>
            `;
            
            historyList.insertBefore(historyItem, historyList.firstChild);
            gameHistory.unshift({ 
                win, 
                dice1, 
                dice2, 
                total, 
                amount, 
                timestamp: new Date(),
                betType: isBetLow ? 'low' : 'high'
            });
            
            updateStats();
            saveGameHistory();
            
            if (historyList.children.length > 20) {
                historyList.removeChild(historyList.lastChild);
                gameHistory.pop();
            }
        }
        
        function updateStats() {
            const wins = gameHistory.filter(g => g.win).length;
            const totalGamesCount = gameHistory.length;
            
            totalWins.textContent = wins;
            totalGames.textContent = totalGamesCount;
            
            const totalDeposited = depositHistory
                .filter(d => d.status === 'confirmed')
                .reduce((sum, d) => sum + d.amount, 0);
            totalDeposits.textContent = totalDeposited.toLocaleString('ru-RU');
            
            const totalWithdrawn = withdrawHistory
                .filter(w => w.status === 'completed')
                .reduce((sum, w) => sum + w.amount, 0);
            totalWithdrawals.textContent = totalWithdrawn.toLocaleString('ru-RU');
        }
        
        function updateWithdrawHistory() {
            withdrawHistoryList.innerHTML = '';
            
            if (withdrawHistory.length === 0) {
                withdrawHistoryList.innerHTML = `
                    <div style="text-align: center; padding: 30px 20px; color: var(--text-secondary);">
                        <i class="fas fa-exchange-alt" style="font-size: 2.5rem; margin-bottom: 15px; opacity: 0.5;"></i>
                        <p style="font-size: 0.9rem;">–ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤ –ø—É—Å—Ç–∞</p>
                    </div>
                `;
                return;
            }
            
            withdrawHistory.forEach(withdraw => {
                const item = document.createElement('div');
                item.className = `withdraw-history-item ${withdraw.status}`;
                
                const time = new Date(withdraw.timestamp).toLocaleTimeString('ru-RU', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                const date = new Date(withdraw.timestamp).toLocaleDateString('ru-RU');
                
                let methodText = '';
                if (withdraw.method === 'sbp') {
                    methodText = '–°–ë–ü';
                } else {
                    methodText = 'USDT';
                }
                
                let statusText = '';
                let statusClass = '';
                if (withdraw.status === 'pending') {
                    statusText = '–û–∂–∏–¥–∞–Ω–∏–µ';
                    statusClass = 'status-pending';
                } else if (withdraw.status === 'completed') {
                    statusText = '–í—ã–≤–µ–¥–µ–Ω–æ';
                    statusClass = 'status-completed';
                } else if (withdraw.status === 'cancelled') {
                    statusText = '–û—Ç–º–µ–Ω–µ–Ω–æ';
                    statusClass = 'status-cancelled';
                }
                
                item.innerHTML = `
                    <div class="withdraw-history-info">
                        <h4>${withdraw.amount.toLocaleString('ru-RU')} ‚ÇΩ</h4>
                        <div class="withdraw-history-details">
                            <p>${date} ${time}</p>
                            <p>${methodText} ‚Ä¢ ID: ${withdraw.id}</p>
                        </div>
                        <span class="withdraw-history-status ${statusClass}">${statusText}</span>
                    </div>
                    <div class="withdraw-history-amount ${withdraw.status}">
                        ${withdraw.status === 'cancelled' ? '‚Üª' : ''}${withdraw.amount.toLocaleString('ru-RU')}‚ÇΩ
                    </div>
                `;
                
                withdrawHistoryList.appendChild(item);
            });
        }
        
        function playGame() {
            if (balance < betAmount) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤', '–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –¥–ª—è –∏–≥—Ä—ã', 'error');
                return;
            }
            
            playButton.disabled = true;
            playButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –ë—Ä–æ—Å–æ–∫...';
            
            setTimeout(() => {
                rollDice();
                playButton.disabled = false;
                playButton.innerHTML = '<i class="fas fa-play"></i> –ò–≥—Ä–∞—Ç—å';
            }, 500);
        }
        
        // ========== –î–ï–ü–û–ó–ò–¢ ==========
        function openDepositModal() {
            depositDetails.style.display = 'none';
            depositNextBtn.style.display = 'flex';
            depositConfirmBtn.style.display = 'none';
            depositWaitingBtn.style.display = 'none';
            
            currentPaymentId = generatePaymentId();
            paymentCommentElement.textContent = currentPaymentId;
            
            depositModal.classList.add('active');
        }
        
        function handleDepositNext() {
            const amount = parseInt(depositAmountInput.value) || 1000;
            if (amount < 100 || amount > 50000) {
                showNotification('–û—à–∏–±–∫–∞', '–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 100 –¥–æ 50 000 ‚ÇΩ', 'error');
                return;
            }
            
            const finalAmount = calculateFinalAmount(amount);
            finalAmountElement.textContent = finalAmount.toLocaleString('ru-RU') + ' ‚ÇΩ';
            
            depositDetails.style.display = 'block';
            depositNextBtn.style.display = 'none';
            depositConfirmBtn.style.display = 'flex';
        }
        
        async function handleDepositConfirm() {
            const amount = parseInt(depositAmountInput.value) || 1000;
            const finalAmount = calculateFinalAmount(amount);
            
            const method = document.querySelector('#depositModal .payment-method-compact.active').getAttribute('data-method');
            const methodName = method === 'sbp' ? '–°–ë–ü' : 'USDT TRC-20';
            
            const message = `üé≤ <b>WENRY DICE | –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</b>\n\n` +
                          `ID: <code>${currentPaymentId}</code>\n` +
                          `–ò–≥—Ä–æ–∫: <b>${currentUser?.first_name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</b>\n` +
                          `TG ID: <code>${currentUser?.id || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</code>\n` +
                          `–ù–∏–∫–Ω–µ–π–º: @${currentUser?.username || '–ù–µ—Ç'}\n` +
                          `–°—É–º–º–∞: <b>${amount} ‚ÇΩ</b>\n` +
                          `–ö –æ–ø–ª–∞—Ç–µ: <b>${finalAmount} ‚ÇΩ</b>\n` +
                          `–ú–µ—Ç–æ–¥: <b>${methodName}</b>\n` +
                          `–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: <code>${currentPaymentId}</code>\n\n` +
                          `–í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}`;
            
            const replyMarkup = {
                inline_keyboard: [[
                    { text: '‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å', callback_data: `confirm_deposit_${currentPaymentId}` },
                    { text: '‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å', callback_data: `reject_deposit_${currentPaymentId}` }
                ]]
            };
            
            const result = await sendTelegramMessage(ADMIN_ID, message, replyMarkup);
            
            if (result && result.ok) {
                depositHistory.push({
                    id: currentPaymentId,
                    amount: amount,
                    finalAmount: finalAmount,
                    method: method,
                    status: 'pending',
                    timestamp: new Date()
                });
                
                saveDepositHistory();
                
                depositConfirmBtn.style.display = 'none';
                depositWaitingBtn.style.display = 'flex';
                
                showNotification('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞', '–û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞', 'info');
            } else {
                showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É', 'error');
            }
        }
        
        // ========== –í–´–í–û–î ==========
        function openWithdrawModal() {
            if (balance < 100) {
                showNotification('–û—à–∏–±–∫–∞', '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤—ã–≤–æ–¥–∞ 100 ‚ÇΩ', 'error');
                return;
            }
            
            withdrawDetails.style.display = 'none';
            sbpWithdrawInput.style.display = 'none';
            cryptoWithdrawInput.style.display = 'none';
            bankSelection.style.display = 'none';
            withdrawNextBtn.style.display = 'flex';
            withdrawConfirmBtn.style.display = 'none';
            withdrawWaitingBtn.style.display = 'none';
            
            currentWithdrawId = generateWithdrawId();
            
            withdrawModal.classList.add('active');
        }
        
        function handleWithdrawNext() {
            const amount = parseInt(withdrawAmountInput.value) || 1000;
            
            if (amount > balance) {
                showNotification('–û—à–∏–±–∫–∞', '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ', 'error');
                return;
            }
            
            if (amount < 100) {
                showNotification('–û—à–∏–±–∫–∞', '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤—ã–≤–æ–¥–∞ 100 ‚ÇΩ', 'error');
                return;
            }
            
            const fee = Math.round(amount * WITHDRAW_FEE);
            const netAmount = amount - fee;
            
            withdrawTotalElement.textContent = amount.toLocaleString('ru-RU') + ' ‚ÇΩ';
            withdrawFeeElement.textContent = fee.toLocaleString('ru-RU') + ' ‚ÇΩ';
            withdrawNetElement.textContent = netAmount.toLocaleString('ru-RU') + ' ‚ÇΩ';
            
            const method = document.querySelector('#withdrawModal .payment-method-compact.active').getAttribute('data-method');
            
            if (method === 'sbp') {
                sbpWithdrawInput.style.display = 'block';
                bankSelection.style.display = 'block';
                cryptoWithdrawInput.style.display = 'none';
            } else {
                cryptoWithdrawInput.style.display = 'block';
                sbpWithdrawInput.style.display = 'none';
                bankSelection.style.display = 'none';
            }
            
            withdrawDetails.style.display = 'none';
            withdrawNextBtn.style.display = 'none';
            withdrawConfirmBtn.style.display = 'flex';
        }
        
        async function handleWithdrawConfirm() {
            const amount = parseInt(withdrawAmountInput.value) || 1000;
            const fee = Math.round(amount * WITHDRAW_FEE);
            const netAmount = amount - fee;
            
            const method = document.querySelector('#withdrawModal .payment-method-compact.active').getAttribute('data-method');
            let details = '';
            let methodName = '';
            let withdrawDetailsText = '';
            
            if (method === 'sbp') {
                if (!sbpAccountInput.value.trim()) {
                    showNotification('–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –∫–∞—Ä—Ç—ã', 'error');
                    return;
                }
                
                const selectedBank = document.querySelector('#withdrawModal .bank-option.active');
                if (!selectedBank) {
                    showNotification('–û—à–∏–±–∫–∞', '–í—ã–±–µ—Ä–∏—Ç–µ –±–∞–Ω–∫', 'error');
                    return;
                }
                
                const bankCode = selectedBank.getAttribute('data-bank');
                const bankNames = {
                    'tinkoff': '–¢-–ë–∞–Ω–∫',
                    'sber': '–°–±–µ—Ä',
                    'alfa': '–ê–ª—å—Ñ–∞',
                    'vtb': '–í–¢–ë'
                };
                
                methodName = `–°–ë–ü (${bankNames[bankCode]})`;
                details = `–ë–∞–Ω–∫: ${bankNames[bankCode]}\n–†–µ–∫–≤–∏–∑–∏—Ç—ã: ${sbpAccountInput.value}`;
                withdrawDetailsText = `–ë–∞–Ω–∫: ${bankNames[bankCode]} | ${sbpAccountInput.value}`;
            } else {
                if (!cryptoWalletInput.value.trim()) {
                    showNotification('–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞', 'error');
                    return;
                }
                methodName = 'USDT TRC-20';
                details = `–ê–¥—Ä–µ—Å: ${cryptoWalletInput.value}`;
                withdrawDetailsText = `–ö–æ—à–µ–ª–µ–∫: ${cryptoWalletInput.value}`;
            }
            
            const message = `üé≤ <b>WENRY DICE | –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –≤—ã–≤–æ–¥</b>\n\n` +
                          `ID: <code>${currentWithdrawId}</code>\n` +
                          `–ò–≥—Ä–æ–∫: <b>${currentUser?.first_name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</b>\n` +
                          `TG ID: <code>${currentUser?.id || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</code>\n` +
                          `–ù–∏–∫–Ω–µ–π–º: @${currentUser?.username || '–ù–µ—Ç'}\n` +
                          `–°—É–º–º–∞: <b>${amount} ‚ÇΩ</b>\n` +
                          `–ö–æ–º–∏—Å—Å–∏—è: <b>${fee} ‚ÇΩ (5%)</b>\n` +
                          `–ö –≤—ã–ø–ª–∞—Ç–µ: <b>${netAmount} ‚ÇΩ</b>\n` +
                          `–ú–µ—Ç–æ–¥: <b>${methodName}</b>\n` +
                          `${details}\n\n` +
                          `–í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}`;
            
            const replyMarkup = {
                inline_keyboard: [[
                    { text: '‚úÖ –í—ã–ø–ª–∞—Ç–∏—Ç—å', callback_data: `approve_withdraw_${currentWithdrawId}` },
                    { text: '‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å', callback_data: `reject_withdraw_${currentWithdrawId}` }
                ]]
            };
            
            const result = await sendTelegramMessage(ADMIN_ID, message, replyMarkup);
            
            if (result && result.ok) {
                // –†–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º —Å—Ä–µ–¥—Å—Ç–≤–∞
                balance -= amount;
                updateBalance();
                
                const withdrawData = {
                    id: currentWithdrawId,
                    amount: amount,
                    netAmount: netAmount,
                    method: method,
                    details: withdrawDetailsText,
                    status: 'pending',
                    timestamp: new Date()
                };
                
                if (method === 'sbp') {
                    const selectedBank = document.querySelector('#withdrawModal .bank-option.active');
                    const bankCode = selectedBank.getAttribute('data-bank');
                    withdrawData.bank = bankCode;
                    withdrawData.account = sbpAccountInput.value;
                } else {
                    withdrawData.wallet = cryptoWalletInput.value;
                }
                
                withdrawHistory.unshift(withdrawData);
                saveWithdrawHistory();
                updateWithdrawHistory();
                
                withdrawConfirmBtn.style.display = 'none';
                withdrawWaitingBtn.style.display = 'flex';
                
                showNotification('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞', '–û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞', 'info');
            } else {
                showNotification('–û—à–∏–±–∫–∞', '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É', 'error');
            }
        }
        
        // ========== –°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–• ==========
        function saveGameHistory() {
            localStorage.setItem('wenry_history', JSON.stringify(gameHistory.slice(0, 50)));
        }
        
        function saveDepositHistory() {
            localStorage.setItem('wenry_deposits', JSON.stringify(depositHistory));
        }
        
        function saveWithdrawHistory() {
            localStorage.setItem('wenry_withdrawals', JSON.stringify(withdrawHistory));
        }
        
        function loadSavedData() {
            // –ë–∞–ª–∞–Ω—Å
            const savedBalance = localStorage.getItem('wenry_balance');
            if (savedBalance) {
                balance = parseInt(savedBalance);
            }
            
            // –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä
            const savedHistory = localStorage.getItem('wenry_history');
            if (savedHistory) {
                try {
                    gameHistory = JSON.parse(savedHistory);
                    gameHistory.forEach(game => {
                        const time = new Date(game.timestamp).toLocaleTimeString('ru-RU', { 
                            hour: '2-digit', 
                            minute: '2-digit' 
                        });
                        
                        const historyItem = document.createElement('div');
                        historyItem.className = `history-item ${game.win ? 'win' : 'lose'}`;
                        historyItem.innerHTML = `
                            <div class="history-info">
                                <div class="history-dice">${diceFaces[game.dice1-1]}${diceFaces[game.dice2-1]}</div>
                                <div class="history-details">
                                    <h4>${game.dice1} + ${game.dice2} = ${game.total}</h4>
                                    <p>${time} ‚Ä¢ ${game.betType === 'low' ? '–ú–µ–Ω—å—à–µ 7' : '–ë–æ–ª—å—à–µ 7'}</p>
                                </div>
                            </div>
                            <div class="history-amount ${game.amount > 0 ? 'positive' : 'negative'}">
                                ${game.amount > 0 ? '+' : ''}${game.amount}‚ÇΩ
                            </div>
                        `;
                        historyList.appendChild(historyItem);
                    });
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∏–≥—Ä:', e);
                }
            }
            
            // –ò—Å—Ç–æ—Ä–∏—è –¥–µ–ø–æ–∑–∏—Ç–æ–≤
            const savedDeposits = localStorage.getItem('wenry_deposits');
            if (savedDeposits) {
                try {
                    depositHistory = JSON.parse(savedDeposits);
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ–ø–æ–∑–∏—Ç–æ–≤:', e);
                }
            }
            
            // –ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤
            const savedWithdrawals = localStorage.getItem('wenry_withdrawals');
            if (savedWithdrawals) {
                try {
                    withdrawHistory = JSON.parse(savedWithdrawals);
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã–≤–æ–¥–æ–≤:', e);
                }
            }
        }
        
        // ========== –°–ò–ú–£–õ–Ø–¶–ò–Ø –û–¢–í–ï–¢–û–í –û–¢ –ê–î–ú–ò–ù–ê ==========
        function simulateAdminResponse() {
            // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–ø–æ–∑–∏—Ç–∞
            const pendingDeposit = depositHistory.find(d => d.status === 'pending');
            if (pendingDeposit && Math.random() > 0.7) {
                pendingDeposit.status = 'confirmed';
                balance += pendingDeposit.amount;
                updateBalance();
                
                if (depositModal.classList.contains('active')) {
                    depositWaitingBtn.style.display = 'none';
                    depositModal.classList.remove('active');
                    showNotification('‚úÖ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ!', `–ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${pendingDeposit.amount}‚ÇΩ`, 'success');
                }
                
                saveDepositHistory();
            }
            
            // –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤—ã–≤–æ–¥
            const pendingWithdraw = withdrawHistory.find(w => w.status === 'pending');
            if (pendingWithdraw && Math.random() > 0.7) {
                if (Math.random() > 0.5) {
                    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞
                    pendingWithdraw.status = 'completed';
                    
                    if (withdrawModal.classList.contains('active')) {
                        withdrawWaitingBtn.style.display = 'none';
                        withdrawModal.classList.remove('active');
                        showNotification('‚úÖ –í—ã–≤–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!', `–°—Ä–µ–¥—Å—Ç–≤–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã`, 'success');
                    }
                } else {
                    // –û—Ç–∫–∞–∑ –≤ –≤—ã–≤–æ–¥–µ
                    pendingWithdraw.status = 'cancelled';
                    balance += pendingWithdraw.amount; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ä–µ–¥—Å—Ç–≤–∞
                    updateBalance();
                    
                    if (withdrawModal.classList.contains('active')) {
                        withdrawWaitingBtn.style.display = 'none';
                        withdrawModal.classList.remove('active');
                        showNotification('‚ùå –í—ã–≤–æ–¥ –æ—Ç–∫–ª–æ–Ω–µ–Ω', '–°—Ä–µ–¥—Å—Ç–≤–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –Ω–∞ –±–∞–ª–∞–Ω—Å', 'error');
                    } else {
                        showNotification('‚ùå –í—ã–≤–æ–¥ –æ—Ç–∫–ª–æ–Ω–µ–Ω', `–ó–∞—è–≤–∫–∞ #${pendingWithdraw.id} –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞. –°—Ä–µ–¥—Å—Ç–≤–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –Ω–∞ –±–∞–ª–∞–Ω—Å`, 'error');
                    }
                }
                
                saveWithdrawHistory();
                updateWithdrawHistory();
            }
        }
        
        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram
            tg.ready();
            tg.expand();
            tg.setHeaderColor('#0f0f0f');
            tg.setBackgroundColor('#0f0f0f');
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (tg.initDataUnsafe.user) {
                currentUser = tg.initDataUnsafe.user;
                userName.textContent = currentUser.first_name || '–ò–≥—Ä–æ–∫';
                userId.textContent = `ID: ${currentUser.id}`;
                userUsername.textContent = currentUser.username ? `@${currentUser.username}` : '–ù–µ—Ç –Ω–∏–∫–Ω–µ–π–º–∞';
                userGreeting.textContent = `${currentUser.first_name} | Wenry Dice`;
                
                if (currentUser.photo_url) {
                    userAvatar.style.backgroundImage = `url(${currentUser.photo_url})`;
                    userAvatar.style.backgroundSize = 'cover';
                    userAvatar.style.backgroundPosition = 'center';
                    userAvatar.innerHTML = '';
                }
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            loadSavedData();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
            updateBalance();
            updateBetAmount();
            updateStats();
            updateWithdrawHistory();
            
            // ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ==========
            
            // –ù–∞–≤–∏–≥–∞—Ü–∏—è
            navButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    
                    navButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    Object.values(sections).forEach(s => s.classList.remove('active'));
                    sections[section].classList.add('active');
                });
            });
            
            // –î–µ–ø–æ–∑–∏—Ç –∫–Ω–æ–ø–∫–∏
            depositBtns.forEach(btn => {
                btn.addEventListener('click', openDepositModal);
            });
            
            depositCloseBtn.addEventListener('click', () => {
                depositModal.classList.remove('active');
            });
            
            depositModal.addEventListener('click', function(e) {
                if (e.target === this) depositModal.classList.remove('active');
            });
            
            depositNextBtn.addEventListener('click', handleDepositNext);
            depositConfirmBtn.addEventListener('click', handleDepositConfirm);
            
            // –í—ã–≤–æ–¥ –∫–Ω–æ–ø–∫–∏
            withdrawBtns.forEach(btn => {
                btn.addEventListener('click', openWithdrawModal);
            });
            
            withdrawCloseBtn.addEventListener('click', () => {
                withdrawModal.classList.remove('active');
            });
            
            withdrawModal.addEventListener('click', function(e) {
                if (e.target === this) withdrawModal.classList.remove('active');
            });
            
            withdrawNextBtn.addEventListener('click', handleWithdrawNext);
            withdrawConfirmBtn.addEventListener('click', handleWithdrawConfirm);
            
            // –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã
            paymentMethods.forEach(method => {
                method.addEventListener('click', function() {
                    const modal = this.closest('.modal-overlay');
                    const isDeposit = modal.id === 'depositModal';
                    
                    paymentMethods.forEach(m => {
                        if (m.closest('.modal-overlay') === modal) {
                            m.classList.remove('active');
                            if (m.querySelector('.fa-check-circle')) {
                                m.querySelector('.fa-check-circle').className = 'fas fa-arrow-right';
                            }
                        }
                    });
                    
                    this.classList.add('active');
                    this.querySelector('i').className = 'fas fa-check-circle';
                    
                    if (isDeposit) {
                        const methodType = this.getAttribute('data-method');
                        if (methodType === 'sbp') {
                            sbpDetails.style.display = 'block';
                            cryptoDetails.style.display = 'none';
                        } else {
                            sbpDetails.style.display = 'none';
                            cryptoDetails.style.display = 'block';
                        }
                    }
                });
            });
            
            // –í—ã–±–æ—Ä –±–∞–Ω–∫–∞
            bankOptions.forEach(bank => {
                bank.addEventListener('click', function() {
                    bankOptions.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä —Å—É–º–º—ã
            amountSuggestions.forEach(btn => {
                btn.addEventListener('click', function() {
                    const amount = parseInt(this.getAttribute('data-amount'));
                    const modal = this.closest('.modal-overlay');
                    
                    if (modal.id === 'depositModal') {
                        depositAmountInput.value = amount;
                    } else {
                        if (amount > balance) {
                            showNotification('–û—à–∏–±–∫–∞', '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤', 'error');
                            return;
                        }
                        withdrawAmountInput.value = amount;
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏ –≤—ã–≤–æ–¥–∞
                        const fee = Math.round(amount * WITHDRAW_FEE);
                        const netAmount = amount - fee;
                        
                        withdrawTotalElement.textContent = amount.toLocaleString('ru-RU') + ' ‚ÇΩ';
                        withdrawFeeElement.textContent = fee.toLocaleString('ru-RU') + ' ‚ÇΩ';
                        withdrawNetElement.textContent = netAmount.toLocaleString('ru-RU') + ' ‚ÇΩ';
                    }
                });
            });
            
            // –í–≤–æ–¥ —Å—É–º–º—ã –¥–µ–ø–æ–∑–∏—Ç–∞
            depositAmountInput.addEventListener('input', function() {
                let amount = parseInt(this.value) || 0;
                if (amount < 100) amount = 100;
                if (amount > 50000) amount = 50000;
                this.value = amount;
            });
            
            // –í–≤–æ–¥ —Å—É–º–º—ã –≤—ã–≤–æ–¥–∞
            withdrawAmountInput.addEventListener('input', function() {
                let amount = parseInt(this.value) || 0;
                if (amount < 100) amount = 100;
                if (amount > 50000) amount = 50000;
                if (amount > balance) amount = balance;
                this.value = amount;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏ –≤—ã–≤–æ–¥–∞
                const fee = Math.round(amount * WITHDRAW_FEE);
                const netAmount = amount - fee;
                
                withdrawTotalElement.textContent = amount.toLocaleString('ru-RU') + ' ‚ÇΩ';
                withdrawFeeElement.textContent = fee.toLocaleString('ru-RU') + ' ‚ÇΩ';
                withdrawNetElement.textContent = netAmount.toLocaleString('ru-RU') + ' ‚ÇΩ';
            });
            
            // –ò–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            betSlider.addEventListener('input', function() {
                betAmount = parseInt(this.value);
                updateBetAmount();
            });
            
            document.querySelectorAll('.amount-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const action = this.getAttribute('data-action');
                    
                    switch(action) {
                        case 'half':
                            betAmount = Math.max(10, Math.floor(betAmount / 2));
                            break;
                        case 'double':
                            betAmount = Math.min(1000, betAmount * 2);
                            break;
                        case 'min':
                            betAmount = 10;
                            break;
                        case 'max':
                            betAmount = 1000;
                            break;
                    }
                    
                    updateBetAmount();
                });
            });
            
            betLowButton.addEventListener('click', function() {
                if (!isBetLow) {
                    isBetLow = true;
                    betLowButton.classList.add('active');
                    betHighButton.classList.remove('active');
                }
            });
            
            betHighButton.addEventListener('click', function() {
                if (isBetLow) {
                    isBetLow = false;
                    betHighButton.classList.add('active');
                    betLowButton.classList.remove('active');
                }
            });
            
            playButton.addEventListener('click', playGame);
            
            autoButton.addEventListener('click', function() {
                if (balance < betAmount) {
                    showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤', '–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å', 'error');
                    return;
                }
                
                isAutoPlay = !isAutoPlay;
                
                if (isAutoPlay) {
                    this.innerHTML = '<i class="fas fa-stop"></i> –°—Ç–æ–ø';
                    this.classList.add('pulse');
                    playGame();
                } else {
                    this.innerHTML = '<i class="fas fa-redo"></i> –ê–≤—Ç–æ';
                    this.classList.remove('pulse');
                }
            });
            
            // –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
            clearHistoryButton.addEventListener('click', function() {
                if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä?')) {
                    historyList.innerHTML = '';
                    gameHistory = [];
                    localStorage.removeItem('wenry_history');
                    updateStats();
                    showNotification('–ò—Å—Ç–æ—Ä–∏—è –æ—á–∏—â–µ–Ω–∞', '–í—Å–µ –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª–µ–Ω—ã', 'info');
                }
            });
            
            // –ü—Ä–æ—Ñ–∏–ª—å –∫–Ω–æ–ø–∫–∏
            document.getElementById('statsBtn').addEventListener('click', function() {
                const winRate = gameHistory.length > 0 
                    ? Math.round((gameHistory.filter(g => g.win).length / gameHistory.length) * 100)
                    : 0;
                
                const totalWon = gameHistory.reduce((sum, g) => sum + (g.amount > 0 ? g.amount : 0), 0);
                const totalLost = gameHistory.reduce((sum, g) => sum + (g.amount < 0 ? -g.amount : 0), 0);
                
                showNotification(
                    'üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞',
                    `–ò–≥—Ä: ${gameHistory.length}\n` +
                    `–ü–æ–±–µ–¥: ${gameHistory.filter(g => g.win).length}\n` +
                    `–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥: ${winRate}%\n` +
                    `–í—ã–∏–≥—Ä–∞–Ω–æ: ${totalWon}‚ÇΩ\n` +
                    `–ü—Ä–æ–∏–≥—Ä–∞–Ω–æ: ${totalLost}‚ÇΩ`,
                    'info'
                );
            });
            
            document.getElementById('supportBtn').addEventListener('click', function() {
                window.open('https://t.me/wenrydice_support', '_blank');
            });
            
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞?')) {
                    showNotification('–í—ã—Ö–æ–¥', '–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'info');
                    setTimeout(() => {
                        tg.close();
                    }, 2000);
                }
            });
            
            // –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
            setInterval(simulateAdminResponse, 10000);
        });
    </script>
</body>
</html>
